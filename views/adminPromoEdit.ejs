<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Promo - Admin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">Supermarket App</a>
    </div>
  </nav>

  <div class="container my-4">
    <h1 class="mb-3">Edit Promo</h1>
    <form method="POST" action="/admin/promocodes/<%= promo.id %>">
      <div class="mb-2">
        <label class="form-label">Code</label>
        <input name="code" class="form-control" value="<%= promo.code %>" required />
      </div>
      <div class="mb-2">
        <label class="form-label">Description</label>
        <input name="description" class="form-control" value="<%= promo.description || '' %>" />
      </div>
      <div class="mb-2 row">
        <div class="col">
          <label class="form-label">Type</label>
          <select name="type" class="form-select">
            <option value="percent" <%= promo.type === 'percent' ? 'selected' : '' %>>Percent</option>
            <option value="fixed" <%= promo.type === 'fixed' ? 'selected' : '' %>>Fixed</option>
          </select>
        </div>
        <div class="col">
          <label class="form-label">Amount</label>
          <input name="amount" type="number" step="0.01" class="form-control" value="<%= promo.amount %>" required />
        </div>
      </div>
      <div class="mb-2 row">
        <div class="col">
          <label class="form-label">Min Total</label>
          <input name="min_total" type="number" step="0.01" class="form-control" value="<%= promo.min_total || '' %>" />
        </div>
        <div class="col">
          <label class="form-label">Per-user limit</label>
          <input name="per_user_limit" type="number" class="form-control" value="<%= promo.per_user_limit || '' %>" />
        </div>
      </div>
      <div class="mb-2 row">
        <div class="col">
          <label class="form-label">Starts At</label>
          <input name="starts_at" type="datetime-local" class="form-control" value="<%= promo.starts_at ? new Date(promo.starts_at).toISOString().slice(0,16) : '' %>" />
        </div>
        <div class="col">
          <label class="form-label">Expires At</label>
          <input name="expires_at" type="datetime-local" class="form-control" value="<%= promo.expires_at ? new Date(promo.expires_at).toISOString().slice(0,16) : '' %>" />
        </div>
      </div>
      <div class="mb-2 row">
        <div class="col">
          <label class="form-label">Max Uses</label>
          <input name="max_uses" type="number" class="form-control" value="<%= promo.max_uses || '' %>" />
        </div>
        <div class="col d-flex align-items-end">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="active" id="activeCheck" <%= promo.active ? 'checked' : '' %>>
            <label class="form-check-label" for="activeCheck">Active</label>
          </div>
        </div>
      </div>

      <button class="btn btn-primary">Save Changes</button>
      <a class="btn btn-secondary ms-2" href="/admin/promocodes">Back</a>
    </form>

    <form method="POST" action="/admin/promocodes/<%= promo.id %>/delete" onsubmit="return confirm('Delete this promo?');" class="mt-3">
      <button class="btn btn-danger">Delete Promo</button>
    </form>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
